<!-- Updated poster-form.component.html with Tailwind enhancements -->
<div class="poster-generator grid grid-cols-1 xl:grid-cols-2 gap-8 p-8">
  <!-- Left: User Inputs -->
  <div class="space-y-6">
    <h2 class="text-3xl font-bold text-gray-800">ğŸ§  Poster Architect</h2>

    <!-- Main Prompt -->
    <div>
      <label class="block text-sm font-semibold text-gray-700 mb-1">Prompt</label>
      <textarea [(ngModel)]="form.main_prompt" rows="3"
        class="w-full border border-gray-300 rounded-lg p-3 shadow-sm focus:ring-2 focus:ring-blue-500 focus:outline-none"
        placeholder="e.g., Generate a 1024x1024 poster for a Java bootcamp..."></textarea>
    </div>

    <!-- Field Selection -->
    <div>
      <label class="block text-sm font-semibold text-gray-700 mb-2">Select poster sections</label>
      <div class="grid grid-cols-2 sm:grid-cols-3 gap-2">
        <label class="inline-flex items-center gap-2"><input type="checkbox" [(ngModel)]="form.include_hero_headline" />
          Hero Headline</label>
        <label class="inline-flex items-center gap-2"><input type="checkbox" [(ngModel)]="form.include_hero_subline" />
          Hero Subline</label>
        <label class="inline-flex items-center gap-2"><input type="checkbox" [(ngModel)]="form.include_description" />
          Description</label>
        <label class="inline-flex items-center gap-2"><input type="checkbox" [(ngModel)]="form.include_cta" /> Call To
          Action</label>
        <label class="inline-flex items-center gap-2"><input type="checkbox" [(ngModel)]="form.include_testimonial" />
          Testimonial</label>
        <label class="inline-flex items-center gap-2"><input type="checkbox"
            [(ngModel)]="form.include_success_metrics" /> Success Metrics</label>
        <label class="inline-flex items-center gap-2"><input type="checkbox"
            [(ngModel)]="form.include_target_audience" /> Target Audience</label>
        <label class="inline-flex items-center gap-2"><input type="checkbox" [(ngModel)]="form.include_cta_link" /> CTA
          Link</label>
      </div>
    </div>

    <!-- Optional Theme -->
    <div>
      <label class="block text-sm font-semibold text-gray-700 mb-1">Optional: Theme / Background aesthetics</label>
      <input [(ngModel)]="form.theme"
        class="w-full border border-gray-300 rounded-lg p-3 shadow-sm focus:ring-2 focus:ring-purple-500 focus:outline-none"
        placeholder="e.g., Futuristic Tech Vibe" />
    </div>

    <!-- Generate Poster Fields -->
    <button (click)="submitForm()"
      class="bg-blue-600 text-white font-semibold px-5 py-3 rounded-lg hover:bg-blue-700 transition-all w-full">
      ğŸ” Generate Poster Fields
    </button>

    <!-- Editable Fields After LLaMA -->
    <div *ngIf="aiResponse && getAiFieldKeys().length">
      <h3 class="mt-8 text-xl font-semibold text-gray-800">ğŸ“ Generated Content</h3>

      <div *ngFor="let key of getAiFieldKeys()" class="mb-4">
        <label class="block text-sm font-medium text-gray-600 mb-1">{{ key.replace('_', ' ') }}</label>
        <textarea [(ngModel)]="aiResponse[key]" rows="2"
          class="w-full border border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"></textarea>
      </div>

      <!-- Generate Poster Image -->
      <button (click)="generatePoster()"
        class="bg-green-600 text-white font-semibold px-5 py-3 rounded-lg hover:bg-green-700 transition-all w-full">
        ğŸ¨ Generate Poster Image
      </button>
    </div>
  </div>

  <!-- Right: Poster Preview -->
  <div
    class="bg-gradient-to-br from-gray-100 to-white p-4 rounded-xl shadow-xl flex items-center justify-center min-h-[512px] border border-gray-200">
    <ng-container *ngIf="!isLoading; else loading">
      <img *ngIf="posterBase64; else noPreview" [src]="'data:image/png;base64,' + posterBase64"
        class="max-w-full max-h-[512px] rounded-lg shadow-md" />
      <ng-template #noPreview>
        <p class="text-gray-400 italic">ğŸ–¼ï¸ No poster preview yet.</p>
      </ng-template>
    </ng-container>
    <ng-template #loading>
      <div class="loading-skeleton w-full max-w-[512px] rounded-lg"></div>
    </ng-template>
  </div>
</div>